@using Code.Shared.Model
@namespace Code.Shared
@inherits CodeComponentBase

<MTreeview
    @bind-Open="@initiallyOpen"
    Items="Files"
    Dense
    Dark="LayoutOptions.Dark"
    Hoverable
    Activatable
    ItemKey="u => u.Path"
    ItemChildren="u => u.Children"
    ItemText="u => u.Name"
    LoadChildren="FetchUsers"
    OpenOnClick>
    <PrependContent>
        @if (context.Item?.File == false)
        {
            <MIcon>
                @(context.Open ? "mdi-folder-open" : "mdi-folder")
            </MIcon>
        }
        else
        {
            <MIcon XSmall Style="font-size: 12px" OnClick="async () => await OpenFile(context.Item)">
                @context.Item?.Icon
            </MIcon>
        }
    </PrependContent>
</MTreeview>